# JTS Release Guide

This guide is intended for JTS project maintainers, 
to assist them in preparing releases of the project.

## Release Checklist

### Preparation

1. Create a [Release Milestone](https://github.com/locationtech/jts/milestones)
   
2. Use milestone to tag it to Issues and PRs wanted in the release

3. Confirm Maven build executes with no errors

   ```
   mvn clean install
   ```

### Update Artifacts

On master:

1. Update the [Version History](https://github.com/locationtech/jts/blob/master/doc/JTS_Version_History.md)
   1. Record significant changes (should have been done ongoing)
   2. Enter date of release

2. Set the version number in Java class: [`org.locationtech.jts.JTSVersion`](https://github.com/locationtech/jts/blob/master/modules/core/src/main/java/org/locationtech/jts/JTSVersion.java)
   
   Change SNAPSHOT version:
   
   ```
   private static final String RELEASE_INFO = "SNAPSHOT";
   ```
   
   To release version:
   
   ```
   private static final String RELEASE_INFO = "";
   ```

2. Update version number in Maven POMs (run the Maven release plugin at project root:
   
   ```
   mvn versions:set -DnewVersion=1.18.0
   ```

3. Commit this change.

   ```
   git commit -m "Release version 1.18.0"
   git push
   ```
   
   This is the commit that will form the GitHub release below.

### Create Release Artifacts

1. **Execute the final Maven release build**
   
   ```
   mvn clean install
   ```

### Deploy the Release

1. Create a [JTS GitHub release](https://github.com/locationtech/jts/releases):

   1. Add release artifacts (from the `target` folders):
      
      * jts-core-1.18.0-javadoc.jar
      * jts-core-1.18.0-sources.jar
      * jts-core-1.18.0.jar
      * jts-io-common-1.18.0-javadoc.jar
      * jts-io-common-1.18.0-sources.jar
      * jts-io-common-1.18.0.jar
      * JTSTestBuilder.jar

   2. Copy the release notes from `JTS_Version_History.md`
   
   3. Tip: Mark as a draft release (until Eclipse review process completes)
   
2. Release to Maven Central with the release property and profile 
   
   ```
   mvn clean install -Drelease
   ```

2. Update [Javadoc on JTS Github IO](http://locationtech.github.io/jts/javadoc/):

   Javadoc is generated by the Maven build.
   
   Update branch [`gh-pages`](https://github.com/locationtech/jts/tree/gh-pages):
   
   * clone
   * branch
   * copy new Javadoc
   * commit

### Post release

Update master to the next release version:

1. Set the version number in Java class: [`org.locationtech.jts.JTSVersion`](https://github.com/locationtech/jts/blob/master/modules/core/src/main/java/org/locationtech/jts/JTSVersion.java)
   
   Change release version:
   
   ```
   public static final int MAJOR = 1;
   public static final int MINOR = 18;
   public static final int PATCH = 0;
   private static final String RELEASE_INFO = "";
   ```
   
   To next SNAPSHOT version:
   
   ```
   public static final int MAJOR = 1;
   public static final int MINOR = 19;
   public static final int PATCH = 0;
   private static final String RELEASE_INFO = "SNAPSHOT";
   ```
   
2. Update version number in Maven POMs (run the Maven release plugin at project root:
   
   ```
   mvn versions:set -DnewVersion=1.19.0-SNAPSHOT
   ```
 
3. Commit this change.

   ```
   git commit -m "Version 1.19.0-SNAPSHOT"
   git push
   ```
4. Add a new version entry to the [Version History](https://github.com/locationtech/jts/blob/master/doc/JTS_Version_History.md)

### Announcing

* Message to [JTS Dev mail list](https://accounts.eclipse.org/mailing-list/jts-dev)
* Comment on [Gitter channel](https://gitter.im/locationtech/jts)
* Social media?
* Others?
